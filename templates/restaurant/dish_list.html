{% extends 'base.html' %}

{% block content %}
<h1 class="make-dish">All dishes</h1>
{% include 'includes/search_form.html' %}
{% load price_formatters %}
{% if dish_list %}
<table class="table table-bordered table-hover shadow-lg bg-white mt-5">
  <thead>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Price</th>
    <th>Dish Type</th>
    <th>Cook</th>
    <th>Update</th>
    <th>Delete</th>
  </tr>
  </thead>
  <tbody>
  {% for dish in dish_list %}
  <tr>
    <td>{{ dish.id }}</td>
    <td>
      <a href="{{ dish.get_absolute_url }}">
        {{ dish.name }}
      </a>
    </td>
    <td>{{ dish.price|currency_euro }}</td>
    <td>{{ dish.dish_type.name}}</td>
    <td>
      {% for cook in dish.cooks.all %}
      {% if cook.first_name %}
      {{ cook.first_name }} {{ cook.last_name }}
      <br/>
      {% else %}
      {{ cook.username }}
      {% endif %}
      {% endfor %}
    </td>
    <td>
      <a href="{% url 'restaurant:dish-update' dish.id %}">Update</a>
    </td>
     <td>
      <a href="{% url 'restaurant:dish-delete' dish.id %}">Delete</a>
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>There are no dishes</p>
{% endif %}
<div class="make-dish">
  <p>Create a new dish</p>
  <a href="{% url 'restaurant:dish-create' %}" class="btn btn-success btn-lg">Create</a>
</div>
{% endblock %}
